{% extends "base.html" %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

<main class="container py-4">
  <!-- Search Bar -->
  <div class="row justify-content-center mb-4">
    <div class="col-md-6">
      <form method="get" class="input-group">
        <input type="text" name="servicename" class="form-control" placeholder="Search services...">
        <input type="submit" class="btn btn-primary" value="Search">
      </form>
    </div>
  </div>

  <!-- Service Cards -->
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for n in serviceData %}
    <div class="col">
      <div class="card h-100 shadow-sm border-0">
        <div class="card-body">
          <h5 class="card-title text-primary fw-semibold">{{ n.service_title }}</h5>

          {% if n.service_description|wordcount > 20 %}
          <a class="btn btn-link text-start p-0 text-decoration-none" data-bs-toggle="collapse" href="#desc{{ n.id }}" role="button" aria-expanded="false" aria-controls="desc{{ n.id }}">
            <span class="text-dark">{{ n.service_description|truncatewords:20 }}</span>...
          </a>
          <div class="collapse mt-2" id="desc{{ n.id }}">
            <div class="card card-body bg-light border-0">
              {{ n.service_description }}
            </div>
          </div>
          {% else %}
          <p class="card-text text-muted">{{ n.service_description }}</p>
          {% endif %}
        </div>
      </div>
    </div>
    {% empty %}
    <div class="text-center text-muted fw-bold">No Data Found</div>
    {% endfor %}
    {% comment %} 
  </div> <nav aria-label="Page navigation example">
         <ul class="pagination">   
            {% if serviceDatafinal.has_previous  %}    
             <li class="page-item"><a class="page-link" href="/services/?page=1">First</a></li>   
            <li class="page-item"><a class="page-link" href="/services/?page={{serviceDatafinal.previous_page_number}}">Previous</a></li>
            {% endif %}      
           {% for n in totalpagelist %}     
           <li class="page-item"><a class="page-link" href="/services/?page={{n}}">{{n}}</a></li>     
           {% endfor %}     
           {% if serviceDatafinal.has_next  %}     
           <li class="page-item"><a class="page-link" href="/services/?page={{serviceDatafinal.next_page_number}}">Next</a></li>     
           <li class="page-item"><a class="page-link" href="/services/?page={{totalpage}}">Last</a></li>     
           {% endif %}    </ul> </nav> 
           {% endcomment %}
  </div>
</main>
{% endblock %}
